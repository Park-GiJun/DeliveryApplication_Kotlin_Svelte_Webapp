2025-05-10 18:48:16.878 [main] INFO  c.gijun.backend.BackendApplicationKt - Starting BackendApplicationKt using Java 17.0.11 with PID 22100 (C:\Users\tpgj9\IdeaProjects\DeliveryApplication_Kotlin_Svelte_Webapp\backend\build\classes\kotlin\main started by tpgj9 in C:\Users\tpgj9\IdeaProjects\DeliveryApplication_Kotlin_Svelte_Webapp)
2025-05-10 18:48:16.882 [main] DEBUG c.gijun.backend.BackendApplicationKt - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-05-10 18:48:16.884 [main] INFO  c.gijun.backend.BackendApplicationKt - The following 1 profile is active: "dev"
2025-05-10 18:48:18.679 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-10 18:48:18.682 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2025-05-10 18:48:18.741 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 52 ms. Found 0 R2DBC repository interfaces.
2025-05-10 18:48:19.495 [main] INFO  c.gijun.backend.config.RedisConfig - Redis 연결 설정: 호스트=210.121.177.150, 포트=6379, 사용자=default
2025-05-10 18:48:19.902 [main] INFO  c.gijun.backend.config.KafkaConfig - Kafka 템플릿 생성
2025-05-10 18:48:20.373 [main] INFO  c.g.b.h.EventStreamWebSocketHandler - 이벤트 스트림 웹소켓 핸들러 초기화 - 3초마다 테스트 이벤트 생성
2025-05-10 18:48:20.411 [main] WARN  com.gijun.backend.util.DotEnv - .env 파일을 찾을 수 없습니다. 시스템 환경 변수나 기본값을 사용합니다.
2025-05-10 18:48:20.411 [main] INFO  c.g.b.adapter.ConnectionTestRouter - ConnectionTest 라우터 초기화
2025-05-10 18:48:20.430 [main] INFO  c.g.b.adapter.ConnectionTestRouter - ConnectionTest 라우터 설정 완료: /api/connection-test/*
2025-05-10 18:48:20.432 [main] INFO  c.g.b.a.customer.CustomerAdapter - 고객 어댑터 라우터 초기화
2025-05-10 18:48:20.434 [main] INFO  c.g.b.adapter.order.OrderAdapter - 주문 어댑터 라우터 초기화
2025-05-10 18:48:20.437 [main] INFO  c.g.b.adapter.order.OrderAdapter - 주문 API 라우팅 설정 완료: /api/orders
2025-05-10 18:48:20.438 [main] INFO  c.g.b.adapter.order.OrderTestAdapter - 주문 테스트 어댑터 라우터 초기화
2025-05-10 18:48:20.439 [main] INFO  c.g.b.adapter.order.OrderTestAdapter - 주문 테스트 API 라우팅 설정 완료: /api/test/orders
2025-05-10 18:48:20.440 [main] INFO  c.g.b.adapter.store.StoreAdapter - 매장 어댑터 라우터 초기화
2025-05-10 18:48:20.444 [main] INFO  c.g.b.adapter.store.StoreAdapter - 매장 API 라우팅 설정 완료: /api/stores
2025-05-10 18:48:20.444 [main] INFO  c.g.backend.adapter.TestDataAdapter - 테스트 데이터 API 라우터 초기화
2025-05-10 18:48:20.448 [main] INFO  c.g.backend.adapter.TestDataAdapter - 테스트 데이터 API 라우팅 설정 완료: /api/test/data
2025-05-10 18:48:20.449 [main] INFO  c.g.b.config.DatabaseInitializer - 데이터베이스 초기화 모드: never
2025-05-10 18:48:20.451 [main] INFO  c.gijun.backend.config.KafkaConfig - Kafka 테스트 토픽 생성: delivery.test
2025-05-10 18:48:20.455 [main] INFO  c.gijun.backend.config.KafkaConfig - Kafka 어드민 설정: 210.121.177.150:9092
2025-05-10 18:48:20.473 [main] INFO  c.gijun.backend.config.KafkaConfig - Kafka 리스너 컨테이너 팩토리 생성
2025-05-10 18:48:20.657 [main] INFO  c.gijun.backend.config.WebFluxConfig - CORS 설정 적용: 모든 오리진 허용
2025-05-10 18:48:20.785 [main] INFO  c.g.backend.config.WebSocketConfig - WebSocket 핸들러 매핑 설정: [/ws/store/{storeId}, /ws/events, /ws/echo, /ws/rider/{riderId}, /ws/customer/{customerId}]
2025-05-10 18:48:20.914 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2025-05-10 18:48:21.343 [main] INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	auto.include.jmx.reporter = true
	bootstrap.servers = [210.121.177.150:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2025-05-10 18:48:21.403 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.6.1
2025-05-10 18:48:21.404 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: 5e3c2b738d253ff5
2025-05-10 18:48:21.404 [main] INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1746870501402
2025-05-10 18:48:21.848 [kafka-admin-client-thread | adminclient-1] INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2025-05-10 18:48:21.855 [kafka-admin-client-thread | adminclient-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2025-05-10 18:48:21.855 [kafka-admin-client-thread | adminclient-1] INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2025-05-10 18:48:21.855 [kafka-admin-client-thread | adminclient-1] INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2025-05-10 18:48:22.074 [main] INFO  o.s.b.w.e.netty.NettyWebServer - Netty started on port 52001
2025-05-10 18:48:22.090 [main] INFO  c.gijun.backend.BackendApplicationKt - Started BackendApplicationKt in 5.732 seconds (process running for 6.51)
2025-05-10 18:48:23.287 [reactor-tcp-nio-2] DEBUG io.r2dbc.pool.ConnectionPool - Obtaining new connection from the pool
2025-05-10 18:48:23.300 [reactor-tcp-nio-2] DEBUG io.r2dbc.pool.PooledConnection - Releasing connection
2025-05-10 18:48:23.396 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=76bc63e5-de67-4a64-a9fc-8f41940f6755, type=INFO, timestamp=2025-05-10T18:48:23.395282, message=테스트 이벤트 메시지: INFO}
2025-05-10 18:48:26.383 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=0c9ce60c-3117-403b-a846-77e6af41f439, type=ALERT, timestamp=2025-05-10T18:48:26.383623800, message=테스트 이벤트 메시지: ALERT}
2025-05-10 18:48:29.393 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=2d2b1413-2869-449e-a293-eae0da7c8365, type=INFO, timestamp=2025-05-10T18:48:29.393657500, message=테스트 이벤트 메시지: INFO}
2025-05-10 18:48:32.393 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=6e1dbb09-4415-40cb-80ec-7a61b6446ec0, type=UPDATE, timestamp=2025-05-10T18:48:32.393661700, message=테스트 이벤트 메시지: UPDATE}
2025-05-10 18:48:35.387 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=4f4634be-899c-4bff-bd8f-bca5abe74d8d, type=UPDATE, timestamp=2025-05-10T18:48:35.387109500, message=테스트 이벤트 메시지: UPDATE}
2025-05-10 18:48:38.382 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=c79f710d-ea3f-40dc-b1d0-178508102ca3, type=INFO, timestamp=2025-05-10T18:48:38.382065600, message=테스트 이벤트 메시지: INFO}
2025-05-10 18:48:41.387 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=8c4e01eb-4759-4040-8db1-f8c3a4fbb7c7, type=ALERT, timestamp=2025-05-10T18:48:41.387566200, message=테스트 이벤트 메시지: ALERT}
2025-05-10 18:48:44.384 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=30fd2493-558c-4dc3-82c0-d46ec4a4aec8, type=INFO, timestamp=2025-05-10T18:48:44.384462300, message=테스트 이벤트 메시지: INFO}
2025-05-10 18:48:47.381 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=de66b85f-026b-41de-b09d-8ac3f3459010, type=ALERT, timestamp=2025-05-10T18:48:47.381571900, message=테스트 이벤트 메시지: ALERT}
2025-05-10 18:48:48.478 [reactor-http-nio-2] INFO  c.g.b.i.r.c.CustomerRepositoryImpl - 모든 고객 검색
2025-05-10 18:48:48.507 [reactor-http-nio-2] DEBUG io.r2dbc.pool.ConnectionPool - Obtaining new connection from the pool
2025-05-10 18:48:48.522 [reactor-http-nio-2] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT customer.* FROM customer]
2025-05-10 18:48:48.557 [reactor-tcp-nio-2] DEBUG io.r2dbc.pool.PooledConnection - Releasing connection
2025-05-10 18:48:48.639 [reactor-http-nio-3] INFO  c.g.b.h.CustomerNotificationWebSocketHandler - 고객 1의 WebSocket 세션 연결됨: ID=17ec06a5
2025-05-10 18:48:50.388 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=0a78bc75-730d-4e1c-9d3b-d391c78db5ea, type=INFO, timestamp=2025-05-10T18:48:50.388757, message=테스트 이벤트 메시지: INFO}
2025-05-10 18:48:51.990 [reactor-http-nio-3] INFO  c.g.b.h.CustomerNotificationWebSocketHandler - 고객 1의 WebSocket 세션 종료됨: ID=17ec06a5, signal=onComplete
2025-05-10 18:48:51.991 [reactor-http-nio-3] INFO  c.g.b.h.CustomerNotificationWebSocketHandler - 고객 1의 모든 세션이 종료되어 싱크를 제거합니다.
2025-05-10 18:48:52.016 [reactor-http-nio-2] INFO  c.g.b.handler.store.StoreHandler - 모든 매장 조회 요청
2025-05-10 18:48:52.016 [reactor-http-nio-2] INFO  c.g.b.a.q.s.StoreQueryServiceImpl - 모든 매장 정보 조회 서비스
2025-05-10 18:48:52.017 [reactor-http-nio-2] INFO  c.g.b.i.r.store.StoreRepositoryImpl - 모든 매장 조회 레포지토리
2025-05-10 18:48:52.018 [reactor-http-nio-4] INFO  c.g.b.h.StoreNotificationWebSocketHandler - 매장 1의 WebSocket 세션 연결됨: ID=40e6c9b4
2025-05-10 18:48:52.020 [reactor-http-nio-2] DEBUG io.r2dbc.pool.ConnectionPool - Obtaining new connection from the pool
2025-05-10 18:48:52.021 [reactor-http-nio-2] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT store.* FROM store]
2025-05-10 18:48:52.035 [reactor-tcp-nio-2] DEBUG io.r2dbc.pool.PooledConnection - Releasing connection
2025-05-10 18:48:52.036 [reactor-tcp-nio-2] INFO  c.g.b.i.r.store.StoreRepositoryImpl - 조회된 매장 수: 10
2025-05-10 18:48:52.060 [reactor-http-nio-2] INFO  c.g.b.handler.store.StoreHandler - 매장 메뉴 조회 요청: storeId=1
2025-05-10 18:48:52.060 [reactor-http-nio-2] INFO  c.g.b.a.q.s.StoreQueryServiceImpl - 매장 메뉴 조회 서비스: storeId=1
2025-05-10 18:48:52.061 [reactor-http-nio-2] INFO  c.g.b.i.r.store.StoreRepositoryImpl - 매장 메뉴 조회 레포지토리: storeId=1
2025-05-10 18:48:52.072 [reactor-http-nio-2] DEBUG io.r2dbc.pool.ConnectionPool - Obtaining new connection from the pool
2025-05-10 18:48:52.075 [reactor-http-nio-2] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT menu_category.* FROM menu_category WHERE menu_category.store_id = ?]
2025-05-10 18:48:52.096 [reactor-tcp-nio-2] DEBUG io.r2dbc.pool.ConnectionPool - Obtaining new connection from the pool
2025-05-10 18:48:52.104 [reactor-tcp-nio-2] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT menu_item.* FROM menu_item WHERE menu_item.category_id = ?]
2025-05-10 18:48:52.106 [reactor-tcp-nio-2] DEBUG io.r2dbc.pool.ConnectionPool - Obtaining new connection from the pool
2025-05-10 18:48:52.106 [reactor-tcp-nio-2] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT menu_item.* FROM menu_item WHERE menu_item.category_id = ?]
2025-05-10 18:48:52.108 [reactor-tcp-nio-2] DEBUG io.r2dbc.pool.PooledConnection - Releasing connection
2025-05-10 18:48:52.118 [reactor-tcp-nio-2] DEBUG io.r2dbc.pool.PooledConnection - Releasing connection
2025-05-10 18:48:52.119 [reactor-tcp-nio-2] DEBUG io.r2dbc.pool.PooledConnection - Releasing connection
2025-05-10 18:48:53.383 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=e2557918-acd1-4d85-90ef-3aaacb2ceb1b, type=ALERT, timestamp=2025-05-10T18:48:53.383095200, message=테스트 이벤트 메시지: ALERT}
2025-05-10 18:48:56.393 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=435615d1-f36d-4491-b39f-5c53fe0fb91d, type=UPDATE, timestamp=2025-05-10T18:48:56.393479900, message=테스트 이벤트 메시지: UPDATE}
2025-05-10 18:48:58.926 [reactor-http-nio-4] INFO  c.g.b.h.StoreNotificationWebSocketHandler - 매장 1의 WebSocket 세션 종료됨: ID=40e6c9b4, signal=onComplete
2025-05-10 18:48:58.926 [reactor-http-nio-4] INFO  c.g.b.h.StoreNotificationWebSocketHandler - 매장 1의 모든 세션이 종료되어 싱크를 제거합니다.
2025-05-10 18:48:58.959 [reactor-http-nio-2] INFO  c.g.b.i.r.c.CustomerRepositoryImpl - 모든 고객 검색
2025-05-10 18:48:58.959 [reactor-http-nio-2] DEBUG io.r2dbc.pool.ConnectionPool - Obtaining new connection from the pool
2025-05-10 18:48:58.960 [reactor-http-nio-2] DEBUG o.s.r2dbc.core.DefaultDatabaseClient - Executing SQL statement [SELECT customer.* FROM customer]
2025-05-10 18:48:58.967 [reactor-tcp-nio-2] DEBUG io.r2dbc.pool.PooledConnection - Releasing connection
2025-05-10 18:48:58.980 [reactor-http-nio-5] INFO  c.g.b.h.CustomerNotificationWebSocketHandler - 고객 1의 WebSocket 세션 연결됨: ID=687ed196
2025-05-10 18:48:59.395 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=4caf7a6a-fcfe-4efa-86e5-a237a58c9921, type=INFO, timestamp=2025-05-10T18:48:59.395439300, message=테스트 이벤트 메시지: INFO}
2025-05-10 18:49:02.389 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=abd582b8-e966-41b9-9d56-1e7549403677, type=UPDATE, timestamp=2025-05-10T18:49:02.389708, message=테스트 이벤트 메시지: UPDATE}
2025-05-10 18:49:05.392 [parallel-2] DEBUG c.g.b.h.EventStreamWebSocketHandler - 테스트 이벤트 생성: {id=19ea6180-ea0a-4f91-ba73-8f851b61aa86, type=INFO, timestamp=2025-05-10T18:49:05.392771600, message=테스트 이벤트 메시지: INFO}
